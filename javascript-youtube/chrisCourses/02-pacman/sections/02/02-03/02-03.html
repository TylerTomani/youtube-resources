
<div class="steps-container">
    <h3>02-03 - Move Player (click)</h3>    
    <h4 id="titleJsScript">02/02-03/02-03-js.html</h4>
    <div id="jsCanvasScriptContainer">
        <canvas autofocus  id="canvas" class="" tabindex="0"></canvas>
        <div id="scriptsContainer" class="">
            <div id="xExitContainer" class="">
                <button tabindex="0" id="xBtn">x</button>
            </div>
            <div id="" class="code-container ">
                <pre tabindex="0" class="copy-code main-code" id="mainCode">
                </pre>
            </div>
    
        </div>
    </div>
    
    <!-- 2 -->
    <div class="step-col ">
        <div class="step">
            <div tabindex="0" class="step-txt xmdtxt">
                <h4>02</h4>
                <p>
                    &emsp;Use the 
                    <code class="m-fix">pointerdown</code>
                    <code class="y-fix">addEventListener</code>, 
                    and get the values for <code class="lsg-fix">clientX</code>
                    and <code class="lsg-fix">clientY</code> in 
                    
                </p>
                <p>
                    <span class="**Also"></span>, for the 
                    <code class="m-fix">pointerup</code> <code class="y-fix">event</code>
                    set ,
                    <ul>
                        <li><code class="r-fix">keys.up.pressed</code></li>
                        <li><code class="r-fix">keys.down.pressed</code></li>
                        <li>ect ... to <code class="b-fix">false</code></li>
                    </ul>
                </p>
                <div class="code-container"><pre tabindex="0" class="copy-code main-code">
canvas.addEventListener(<span class="m-fix">'pointerup'</span>, e => {
 <span class="r-fix">keys.up.pressed</span> =  <span class="b-fix">false</span>
 <span class="r-fix">keys.right.pressed</span> = <span class="b-fix">false</span>
 <span class="r-fix">keys.down.pressed</span> = <span class="b-fix">false</span>
 <span class="r-fix">keys.left.pressed</span> = <span class="b-fix">false</span>
})</pre></div>
                
            </div>
            <div class="step-img">
                <img src="sections/02/02-03/images/02.png">
            </div>
        </div>
        <div class="step-col-in">
            <div class="step-txt-in">
                <p class="mdtxt">
                    
                </p>
                <div class="code-container">
                    <pre tabindex="0" class="copy-code main-code smtxt">
function getMousePosition(event) {
    const rect = canvas.getBoundingClientRect();
    return {
        x: event.clientX - rect.left,
        y: event.clientY - rect.top
    };
}
function calculateAngle(mouseX, mouseY, pacmanX, pacmanY) {
    const dx = mouseX - pacmanX;
    const dy = mouseY - pacmanY;
    let angle = Math.atan2(dy, dx) * (180 / Math.PI); // Angle in degrees

    // Normalize angle to be between 0 and 360 degrees
    if (angle < 0) {
        angle += 360;
    }
    
    return angle;
}
addEventListener('pointerdown', e => {
    const mousePoint = getMousePosition(e);
    const blockCenterX = block.position.x 
    const blockCenterY = block.position.y 
    const angle = calculateAngle(mousePoint.x, mousePoint.y, blockCenterX, blockCenterY);
    console.log('Angle:', angle.toFixed(2), 'degrees');
    if(angle > 315 || angle < 45){
        block.velocity.x = block.width
    } else
    if(angle > 215 && angle < 315){
        block.velocity.y = (block.width * -1)
    } else
    if(angle > 135 && angle < 215){
        block.velocity.x = (block.width * -1)
    } else 
    if(angle > 45 && angle < 135){
        block.velocity.y = block.width
    }
});</pre></div>
            </div>
        </div>
    </div>
    <!-- 3 -->
    <div class="step-col">
        <div tabindex="0" class="step-txt">
            <h4>3</h4>
            <p>
                <span class="r">**Imporant note</span>      
                use this code in the .css script to prevent highlighting the canvas when your fingers
                hold down on mobile devices
            </p>
            <div class="code-container">
                <pre tabindex="0" class="copy-code bgw">
canvas {
    -webkit-user-select: none;
    /* Disable text selection in Safari */
    -webkit-touch-callout: none;
    /* Disable callout, like the text copy/paste popup */
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
    /* Disable the highlight color */
    user-select: none;
    /* Disable text selection in other browsers */
    touch-action: none;
    /* Disable the default touch behavior */
}</pre>
            </div>
            
        </div>
    </div>
    

    
    <button tabindex="0" id="nxtLesson">next lesson</button>
</div>


